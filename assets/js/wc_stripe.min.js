Stripe.setPublishableKey(wc_stripe_info.publishableKey),jQuery(function(e){function r(){if(e("#payment_method_wc_stripe").is(":checked")&&(!e('input[name="wc_stripe_card"]').length||"new"===e('input[name="wc_stripe_card"]:checked').val())&&!e("input.stripe_token").length){var r=e("#wc_stripe-card-expiry").payment("cardExpiryVal"),c=e("#wc_stripe-billing-name")||e("#billing_first_name").val()+" "+e("#billing_last_name").val(),t=e("#wc_stripe-billing-zip")||e("#billing_postcode").val(),i={number:e("#wc_stripe-card-number").val(),cvc:e("#wc_stripe-card-cvc").val(),exp_month:r.month,exp_year:r.year,name:c,address_line1:e("#billing_address_1").val(),address_line2:e("#billing_address_2").val(),address_state:e("#billing_state").val(),address_zip:t,address_country:e("#billing_country").val()};return n.block({message:null,overlayCSS:{background:"#fff url("+woocommerce_params.plugin_url+"/assets/images/ajax-loader.gif) no-repeat center",opacity:.6}}),Stripe.createToken(i,a),!1}return!0}function a(r,a){a.error?(e(".payment-errors, .stripe_token").remove(),c.before('<span class="payment-errors required">'+a.error.message+"</span>"),n.unblock()):(n.append('<input type="hidden" class="stripe_token" name="stripe_token" value="'+a.id+'"/>'),n.submit())}var n=e("form.checkout, form#order_review"),c=e("#wc_stripe-creditcard-form");wc_stripe_info.hasCard&&c.hide(),e("form.checkout").on("checkout_place_order",function(){return r()}),e("form#order_review").on("submit",function(){return r()}),n.on("change",'#card-number, #card-expiry, #card-cvc, input[name="wc_stripe_card"]',function(){e(".woocommerce_error, .woocommerce-error, .woocommerce-message, .woocommerce_message, .stripe_token").remove()}),n.on("change",'input[name="wc_stripe_card"]',function(){"new"===e('input[name="wc_stripe_card"]:checked').val()?c.slideDown(200):c.slideUp(200)})}),jQuery(function(e){e(".wc_stripe-card-number").payment("formatCardNumber"),e(".wc_stripe-card-expiry").payment("formatCardExpiry"),e(".wc_stripe-card-cvc").payment("formatCardCVC"),e("body").on("updated_checkout",function(){e(".wc_stripe-card-number").payment("formatCardNumber"),e(".wc_stripe-card-expiry").payment("formatCardExpiry"),e(".wc_stripe-card-cvc").payment("formatCardCVC")})});
//# sourceMappingURL=./wc_stripe.min.map