Stripe.setPublishableKey(s4wc_info.publishableKey),jQuery(function($){function e(){s=$("#s4wc-cc-form"),o=s.find("#s4wc-card-number"),d=s.find("#s4wc-card-expiry"),p=s.find("#s4wc-card-cvc"),s4wc_info.hasCard&&s4wc_info.savedCardsEnabled&&s.hide(),t.on("change",'input[name="s4wc_card"]',function(){"new"===$('input[name="s4wc_card"]:checked').val()?s.slideDown(200):s.slideUp(200)}),l.number&&o.val(l.number.val).attr("class",l.number.classes),l.expiry&&d.val(l.expiry.val),l.cvc&&p.val(l.cvc.val),o.attr("pattern","\\d*"),d.attr("pattern","\\d*"),p.attr("pattern","\\d*")}function r(){if($("#payment_method_s4wc").is(":checked")&&(!$('input[name="s4wc_card"]').length||"new"===$('input[name="s4wc_card"]:checked').val())&&!$("input.stripe_token").length){var e=d.payment("cardExpiryVal"),r=$("#billing_first_name").val()||$("#billing_last_name").val()?$("#billing_first_name").val()+" "+$("#billing_last_name").val():s4wc_info.billing_first_name+" "+s4wc_info.billing_last_name,i={number:o.val()||"",cvc:p.val()||"",exp_month:e.month||"",exp_year:e.year||"",name:$(".s4wc-billing-name").val()||r,address_line1:$("#billing_address_1").val()||s4wc_info.billing_address_1||"",address_line2:$("#billing_address_2").val()||s4wc_info.billing_address_2||"",address_city:$("#billing_city").val()||s4wc_info.billing_city||"",address_state:$("#billing_state").val()||s4wc_info.billing_state||"",address_zip:$(".s4wc-billing-zip").val()||$("#billing_postcode").val()||s4wc_info.billing_postcode||"",address_country:$("#billing_country").val()||s4wc_info.billing_country||""};if(t.block({message:null,overlayCSS:{background:"#fff url("+woocommerce_params.ajax_loader_url+") no-repeat center",opacity:.6}}),a(i))return Stripe.createToken(i,n),!1}return!0}function n(e,r){r.error?($(".payment-errors, .stripe_token, .form_errors").remove(),s.before('<span class="payment-errors required">'+r.error.message+"</span>"),t.unblock()):(t.append('<input type="hidden" class="stripe_token" name="stripe_token" value="'+r.id+'"/>'),t.submit())}function a(e){var r=i(e);if(r.length){$(".stripe_token, .form_errors").remove();for(var n=0,a=r.length;a>n;n++){var c=r[n].field,l=r[n].type;t.append('<input type="hidden" class="form_errors" name="'+c+'" value="'+l+'">')}return t.append('<input type="hidden" class="form_errors" name="form_errors" value="1">'),t.unblock(),!1}return t.find(".woocommerce-error").remove(),!0}function i(e){var r=[];return e.number?$.payment.validateCardNumber(e.number)||r.push({field:"s4wc-card-number",type:"invalid"}):r.push({field:"s4wc-card-number",type:"undefined"}),e.exp_month&&e.exp_year?$.payment.validateCardExpiry(e.exp_month,e.exp_year)||r.push({field:"s4wc-card-expiry",type:"invalid"}):r.push({field:"s4wc-card-expiry",type:"undefined"}),e.cvc?$.payment.validateCardCVC(e.cvc,$.payment.cardType(e.number))||r.push({field:"s4wc-card-cvc",type:"invalid"}):r.push({field:"s4wc-card-cvc",type:"undefined"}),r}var c=$("body"),t=$("form.checkout, form#order_review"),l={},s,o,d,p;t.attr("novalidate","novalidate"),$(window).on("load.s4wc",function(){e()}),c.on("updated_checkout.s4wc",function(){e()}),$("form.checkout").on("checkout_place_order",function(){return r()}),$("form#order_review").on("submit",function(){return r()}),t.on("keyup change",'#card-number, #card-expiry, #card-cvc, input[name="s4wc_card"], input[name="payment_method"]',function(){l.number={val:o.val(),classes:o.attr("class")},l.expiry={val:d.val()},l.cvc={val:p.val()},$(".woocommerce_error, .woocommerce-error, .woocommerce-message, .woocommerce_message, .stripe_token, .form_errors").remove()})});
//# sourceMappingURL=./s4wc.min.js.map